---
layout: post
title: How to delete the composites when the SOA infra is not up.
date: '2014-08-18T21:47:00.000+05:30'
author: Pinak Mazumdar
sitemap:
  lastmod: 2022-05-31
  priority: 0.7
  changefreq: 'monthly'
  exclude: 'no'
tags:
- Aside
modified_time: '2015-04-11T22:48:37.085+05:30'
subtitle: How to delete the composites when the SOA infra is not up.
---

<p><strong>Background..</strong></p><p>We have seen instances when due to some wrong deployments or incorrect MDS, deployment fails or sometimes after we delete the MDS and do a restart of the servers, the application may be referring to an XSD or document which has been removed from the mds repository recently. In such cases, the soa-infra fails to start and many times people end up recreating the domain or if by some easy means people do a schema refresh the approach suggested below can be used to recover from such a scenario very easily.</p><p>Now we need to understand how to delete the composites when the SOA infra is not up,once you have gone through the steps you might feel there is a 100% chance of corrupting the soa-infra while performing the steps, but truly speaking if we follow the steps clearly as mentioned below you can actually save a lot of time.</p><p><strong>Behind the MDS, what happened actually ??<br /></strong></p><hr /><p>In case of situations when we need to delete the composites when the soa-infra is not up ( because of incorrect mds or unstable versions of code), we can remove the MDS or composites in the following way. This usually happens when one of the composites referred to a file that could not be found.</p><p>This can be resolved in the following way, which I tried and tested in my project and saved a lot of time and energy... ;)</p><ol><li>Download the SharedSoaresourcepartition.ear file from Oracle Technology Networks</li><li>This EAR file can also be downloaded from the Oracle Metalink note id: [<strong>1380835.1]</strong>]</li><li>Install the ear file in the weblogic server either through console or through WLST.</li><li>Run the below command to export the metadata from the AdminServer. Change the values appropriate to your environment.</li></ol><p><strong>Command:</strong></p><p>Connect to the Admin Server using wlst by running the wlst.sh under '&lt;ORACLE_SOA1&gt;/common/bin</p><p><em>connect('username','password','t3://adminserverurl:port')</em></p><p><em>exportMetadata(application='ShareSoaInfraPartition',server='AdminServer',toLocation='/orainstall/FMW_HOME/user_projects/domains/int_soa_domain',docs='/deployed-composites/deployed-composites.xml')</em></p><p>Note: Please change the values appropriately as per the environment.</p><p>Result:</p><p>Executing operation: exportMetadata.</p><p>Operation "exportMetadata" completed. Summary of "exportMetadata" operation is:</p><p>List of documents successfully transferred:</p><p>/deployed-composites/deployed-composites.xml</p><p>1 documents successfully transferred.</p><ol start="2"><li>Open the deployed-composites.xml within deployed-composites folder under your location where you have saved the file.</li><li>Delete the composite series or revision which is causing the problem and save the file.</li><li>Import the updated file from your saved location into MDS.</li></ol><p>Command:</p><p><em>importMetadata(application='ShareSoaInfraPartition',server='AdminServer',fromLocation='/orainstall/FMW_HOME/user_projects/domains/int_soa_domain',docs='/deployed-composites/deployed-composites.xml')</em></p><p>Result:</p><p>Executing operation: importMetadata.</p><p>Operation "importMetadata" completed. Summary of "importMetadata" operation is:</p><p>List of documents successfully transferred:</p><p>/deployed-composites/deployed-composites.xml</p><p>1 documents successfully transferred.</p><ol start="7"><li>Restart your SOA servers and verify..<br /><hr /></li></ol>