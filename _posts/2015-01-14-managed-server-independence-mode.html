---
layout: post
title: Managed Server Independence Mode
date: '2015-01-14T18:17:00.000+05:30'
author: Middlewarebytes
tags:
- weblogic
- MSI
modified_time: '2015-04-11T22:48:37.113+05:30'
blogger_id: tag:blogger.com,1999:blog-1729991490043336487.post-4662212130648538861
blogger_orig_url: https://middlewarebytes.blogspot.com/2015/01/managed-server-independence-mode.html
---

When a managed server starts it tries to contact the admin server to retrieve al the configuration files, if a managed server cannot  connect to the admin server during startup, it can  retrieve the configuration items by reading  its local copy of the configuration and security files directly.<br/><br/>A  managed server that starts in this way is running in Managed server Independence mode.Weblogic version 10 alleviates all the pains by making MSI mode and MSI file replication as a default option. So out of the box a managed server is enabled to run in independence mod and all the files required to start a managed server by itself (/config dir and *.dat file) will be automatically copied to the managed server during startup and will be synced (automatically) with the master present in the Administration server.<br/><br/><strong>MSI Mode and the Domain Log File</strong><br/><br/>Each WebLogic Server instance writes log messages to its local log file and a domain-wide log file. The domain log file provides a central location from which to view messages from all servers in a domain.<br/><br/>Usually, a Managed Server forwards messages to the Administration Server, and the Administration Server writes the messages to the domain log file. However, when a Managed Server runs in MSI mode, it assumes the role of writing to the domain log file.<br/><br/>By default, the pathnames for local log files and domain log files are relative to the Manged Server’s root directory. With these default settings, if a Managed Server is located in its own root directory (and it does not share its root directory with the Administration Server), when it runs in MSI mode the Managed Server will create its own domain log file in its root directory. If a Managed Server shares its root directory with the Administration Server, or if you specified an absolute pathname to the domain log, the Managed Server in MSI mode will write to the domain log file that the Administration Server created.<br/><br/><strong>Note: </strong>The Managed Server must have permission to write to the existing file. If you run the Administration Server and Managed Servers under different operating system accounts, you must modify the file permissions of the domain log file so that both user accounts have write permission.<br/><br/><strong>MSI Mode and the Security Realm</strong><br/><br/>A Managed Server must have access to a security realm to complete its startup process. If you use the security realm that WebLogic Server installs, then the Administration Server maintains an LDAP server to store the domain’s security data. All Managed Servers replicate this LDAP server. If the Administration Server fails, Managed Servers running in MSI mode use the<br/><br/>replicated LDAP server for security services. If you use a third party security provider, then the Managed Server must be able to access the security data before it can complete its startup process.<br/><br/><strong>MSI Mode and SSL</strong><br/><br/>If you set up SSL for your servers, each server requires its own set of certificate files, key files, and other SSL-related files. Managed Servers do not retrieve SSL-related files from the Administration Server (though the domain’s configuration file does store the pathnames to those files for each server). Starting in MSI Mode does not require you to copy or move the SSL-related<br/><br/>files unless they are located on a machine that is inaccessible.<br/><br/><strong>MSI Mode and Deployment</strong><br/><br/>A Managed Server that starts in MSI mode deploys its applications from its staging directory: <em>serverroot</em>/stage/<em>appName.</em><br/><br/><strong>MSI Mode and Managed Server Configuration Changes</strong><br/><br/>If you start a Managed Server in MSI mode, you cannot change its configuration until it restores communication with the Administration Server.<br/><br/><strong>MSI Mode and Node Manager</strong><br/><br/>You cannot use Node Manager to start a server instance in MSI mode, only to restart it. For a routine startup, Node Manager requires access to the Administration Server. If the Administration Server is unavailable, you must log onto Managed Server’s host machine to start the Managed Server.<br/><br/><strong>MSI Mode and Configuration File Replication</strong><br/><br/>Managed Server Independence mode includes an option that copies the required configuration files into the Managed Server's root directory every 5 minutes. This option does not replicate a boot identity file.<br/><br/>By default, a Managed Server does not replicate these files. Depending on your backup schemes and the frequency with which you update your domain's configuration, this option might not be worth the performance cost of copying potentially large files across a network.<br/><br/><strong>MSI Mode and Restored Communication with an Administration Server</strong><br/><br/>When the Administration Server starts, it can detect the presence of running Managed Servers (if -<strong>Dweblogic.management.discover=true</strong>, which is the default setting for this property). Upon startup, the Administration Server looks at a persisted copy of the file <strong>running-managed-servers.xml</strong> and notifies all the Managed Servers listed in the file of its presence.<br/><br/>Managed Servers that were started in Managed Server Independence Mode while the Administration Server was unavailable will not appear in running-managed-servers.xml. To re-establish a connection between the Administration Server and such Managed Servers, use the <strong>weblogic.Admin DISCOVERMANAGEDSERVER</strong> command.<br/><br/>When an Administration Server starts up and contacts a Managed Server running in MSI mode, the Managed Server deactivates MSI mode and registers itself to the Administration Server for future configuration change notifications<br/><br/><strong>Starting a Managed Server When the Administration Server Is Not Accessible</strong><br/><br/>If a Managed Server cannot connect to the Administration Server during startup, it can retrieve its configuration by reading locally cached configuration data. A Managed Server that starts in this way is running in Managed Server Independence (MSI) mode.<br/><br/><strong>Note: </strong>If the Managed Server that failed was a clustered Managed Server that was the active server for a migratable service at the time of failure, perform the steps described in“Migrating When the Currently Active Host is Unavailable”<br/><br/><em>Clusters</em>. Do not start the Managed Server in MSI mode.<br/><br/>To start up a Managed Server in MSI mode:<br/><ol><br/>	<li>Ensure that the following files are available in the Managed Server’s root directory:</li><br/></ol><br/><ul><br/>	<li>     msi-config.xml.</li><br/>	<li>     SerializedSystemIni.dat</li><br/>	<li>     boot.properties</li><br/></ul><br/>If these files are not in the Managed Server’s root directory:<br/><ol><br/>	<li>Copy the config.xml and SerializedSystemIni.dat file from the Administration Server’s root directory (or from a backup) to the Managed Server’s root directory.</li><br/>	<li>Rename the configuration file to msi-config.xml. When you start the server, it will use the copied configuration files.</li><br/></ol><br/><strong>Note: </strong>Alternatively, you can use the -Dweblogic.RootDirectory=<em>path </em>startup option to specify a root directory that already contains these files.<br/><br/>Start the Managed Server at the command line or using a script.<br/><br/><strong>Note:</strong>The Managed Server will run in MSI mode until it is contacted by its Administration Server.